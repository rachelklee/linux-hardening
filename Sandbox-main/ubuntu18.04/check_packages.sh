#!/bin/bash 

####################################################
init()
{
    echo init
    #home_directory=$(grep $SUDO_USER /etc/passwd | cut -d : -f 6)
    mkdir -p output
}

installed_packages()
{
    echo installed_packages
    dpkg --get-selections | grep install | awk {'print $1'} | sed "s/:.*//g" | sort | tee output/installed_packages.txt
    cp output/installed_packages.txt output/top_packages.txt
    echo $installed_package_file
}
setup_user()
{
    echo setup_user
    users=()
    input=$1
    while IFS=' ' read -r -a array
    do
        total=${#array[*]}
        echo $total
        echo "echo \"${array[0]}:${array[1]}\" | chpasswd"
        users+=(${array[0]})

        # get allow group
        for ((i = 2 ; i < $total ; i++));
        do
            echo groups ${array[i]}
            list_of_known_group+=(${array[i]})
        done
    done < "$input"
}

top_packages()
{
    package_list=($(grep -e ^Depends -e ^Pre-Depends /var/lib/dpkg/status|awk '{gsub("[(][^)]*[)]","")}1'|tr -d '|' |tr -d ',' | tr -s ' ' |cut -d ' ' -f2-|sed "s/ \n/\n/g"|sed "s/ /\n/g"|sort -u))
    for package in ${package_list[@]}
    do    
        echo $package
        sed -i "/^${package}$/d" output/top_packages.txt
    done
}

remove_known_good_packages()
{
    known_good_packages=()
    known_good_packages+=(account-plugin-facebook)
    known_good_packages+=(account-plugin-flickr)
    known_good_packages+=(alsa-utils)
    known_good_packages+=(a11y-profile-manager-indicator)
    known_good_packages+=(acpi-support)
    known_good_packages+=(activity-log-manager)
    known_good_packages+=(apport-gtk)
    known_good_packages+=(apport-symptoms)
    known_good_packages+=(app-install-data-partner)
    known_good_packages+=(appmenu-qt)
    known_good_packages+=(appmenu-qt5)
    known_good_packages+=(apt-transport-https)
    known_good_packages+=(argyll)
    known_good_packages+=(baobab)
    known_good_packages+=(bash-completion)
    known_good_packages+=(bleachbit)
    known_good_packages+=(branding-ubuntu)
    known_good_packages+=(brltty)
    known_good_packages+=(busybox)
    known_good_packages+=(caribou)
    known_good_packages+=(colord)
    known_good_packages+=(console-setup)
    known_good_packages+=(command-not-found)
    known_good_packages+=(cracklib-runtime)
    known_good_packages+=(dash)
    known_good_packages+=(deja-dup)
    known_good_packages+=(debconf-i18n)
    known_good_packages+=(debian-faq)
    known_good_packages+=(diffutils)
    known_good_packages+=(dirmngr)
    known_good_packages+=(discover)
    known_good_packages+=(doc-debian)
    known_good_packages+=(dosfstools)
    known_good_packages+=(dns-root-data)
    known_good_packages+=(dbus-user-session)
    known_good_packages+=(e2fsprogs)
    known_good_packages+=(enchant)
    known_good_packages+=(eog)
    known_good_packages+=(eject)
    known_good_packages+=(ethtool)
    known_good_packages+=(evince)
    known_good_packages+=(evolution-data-server)
    known_good_packages+=(evolution-data-server-online-accounts)
    known_good_packages+=(example-content)
    known_good_packages+=(exfat-fuse)
    known_good_packages+=(exfat-utils)
    known_good_packages+=(fakeroot)
    known_good_packages+=(file-roller)
    known_good_packages+=(findutils)
    known_good_packages+=(firefox)
    known_good_packages+=(firefox-locale-en)
    known_good_packages+=(fonts-gargi)
    known_good_packages+=(fonts-indic)
    known_good_packages+=(fonts-lato)
    known_good_packages+=(fonts-liberation2)
    known_good_packages+=(fonts-linuxlibertine)
    known_good_packages+=(fonts-mplus)
    known_good_packages+=(fonts-noto-color-emoji)
    known_good_packages+=(fonts-sarai)
    known_good_packages+=(fonts-sil-gentium)
    known_good_packages+=(fonts-sil-gentium-basic)
    known_good_packages+=(fonts-wqy-microhei)
    known_good_packages+=(fonts-cantaqrell)
    known_good_packages+=(fonts-crosextra-caladea)
    known_good_packages+=(fonts-crosextra-carlito)
    known_good_packages+=(fonts-dejavu)
    known_good_packages+=(fonts-droid-fallback)
    known_good_packages+=(fonts-guru)
    known_good_packages+=(fonts-kacst)
    known_good_packages+=(fonts-kacst-one)
    known_good_packages+=(fonts-khmeros-core)
    known_good_packages+=(fonts-lao)
    known_good_packages+=(fonts-lklug-sinhala)
    known_good_packages+=(fonts-nanum)
    known_good_packages+=(fonts-noto-cjk)
    known_good_packages+=(fonts-noto-mono)
    known_good_packages+=(fonts-sil-abyssinica)
    known_good_packages+=(fonts-sil-padauk)
    known_good_packages+=(fonts-stix)
    known_good_packages+=(fonts-takao-pgothic)
    known_good_packages+=(fonts-thai-tlwg)
    known_good_packages+=(fonts-tibetan-machine)
    known_good_packages+=(friendly-recovery)
    known_good_packages+=(fwupd)
    known_good_packages+=(fwupdate-signed)
    known_good_packages+=(gcj-6-jre-lib)
    known_good_packages+=(gdm3)
    known_good_packages+=(gdisk)
    known_good_packages+=(gedit)
    known_good_packages+=(gedit-plugins)
    known_good_packages+=(geoip-database)
    known_good_packages+=(gir1.2-geocodeglib-1.0)
    known_good_packages+=(gir1.2-gmenu-3.0)
    known_good_packages+=(gir1.2-gudev-1.0)
    known_good_packages+=(gir1.2-unity-5.0)
    known_good_packages+=(gir1.2-appindicator3-0.1)
    known_good_packages+=(gir1.2-lokdocview-0.1)
    known_good_packages+=(gkbd-capplet)
    known_good_packages+=(gnome-accessibility-themes)
    known_good_packages+=(gnome-calendar)
    known_good_packages+=(gnome-calculator)
    known_good_packages+=(gnome-characters)
    known_good_packages+=(gnome-clocks)
    known_good_packages+=(gnome-color-manager)
    known_good_packages+=(gnome-contacts)
    known_good_packages+=(gnome-control-center)
    known_good_packages+=(gnome-dictionary)
    known_good_packages+=(gnome-documents)
    known_good_packages+=(gnome-getting-started-docs)
    known_good_packages+=(gnome-logs)
    known_good_packages+=(gnome-maps)
    known_good_packages+=(gnome-menus)
    known_good_packages+=(gnome-online-accounts)
    known_good_packages+=(gnome-shell-extensions)
    known_good_packages+=(gnome-software)
    known_good_packages+=(gnome-sound-recorder)
    known_good_packages+=(gnome-sushi)
    known_good_packages+=(gnome-themes-standard)
    known_good_packages+=(gnome-tweak-tool)
    known_good_packages+=(gnome-weather)
    known_good_packages+=(grub-pc)
    known_good_packages+=(gnome-disk-utility)
    known_good_packages+=(gnome-font-viewer)
    known_good_packages+=(gnome-orca)
    known_good_packages+=(gnome-power-manager)
    known_good_packages+=(gnome-screensaver)
    known_good_packages+=(gnome-screenshot)
    known_good_packages+=(gnome-system-log)
    known_good_packages+=(gnome-system-monitor)
    known_good_packages+=(gnome-terminal)
    known_good_packages+=(gnome-user-guide)
    known_good_packages+=(gnome-user-share)
    known_good_packages+=(gnome-control-center-faces)
    known_good_packages+=(gnome-initial-setup)
    known_good_packages+=(gnome-keyring-pkcs11)
    known_good_packages+=(gnome-software-plugin-snap)
    known_good_packages+=(gnome-startup-applications)
    known_good_packages+=(gnome-themes-extra)
    known_good_packages+=(grep)
    known_good_packages+=(gucharmap)
    known_good_packages+=(gvfs-backends)
    known_good_packages+=(gvfs-fuse)
    known_good_packages+=(gvfs-bin)
    known_good_packages+=(gufw)
    known_good_packages+=(gzip)
    known_good_packages+=(hostname)
    known_good_packages+=(hunspell-en-us)
    known_good_packages+=(hwdata)
    known_good_packages+=(hyphen-en-us)
    known_good_packages+=(hdparm)
    known_good_packages+=(hp-ppd)
    known_good_packages+=(iamerican)
    known_good_packages+=(ibritish)
    known_good_packages+=(ibus-gtk)
    known_good_packages+=(ibus-gtk3)
    known_good_packages+=(ibus-table)
    known_good_packages+=(ieee-data)
    known_good_packages+=(ifupdown)
    known_good_packages+=(iio-sensor-proxy)
    known_good_packages+=(indicator-application)
    known_good_packages+=(indicator-appmenu)
    known_good_packages+=(indicator-messages)
    known_good_packages+=(indicator-printers)
    known_good_packages+=(indicator-session)
    known_good_packages+=(indicator-applet)
    known_good_packages+=(indicator-datetime)
    known_good_packages+=(indicator-keyboard)
    known_good_packages+=(indicator-power)
    known_good_packages+=(indicator-sound)
    known_good_packages+=(init)
    known_good_packages+=(inkscape)
    known_good_packages+=(installation-report)
    known_good_packages+=(intel-gpu-tools)
    known_good_packages+=(iptables)
    known_good_packages+=(ippusbxd)
    known_good_packages+=(iputils-ping)
    known_good_packages+=(iputils-arping)
    known_good_packages+=(iputils-tracepath)
    known_good_packages+=(irqbalance)
    known_good_packages+=(isc-dhcp-common)
    known_good_packages+=(isc-dhcp-client)
    known_good_packages+=(jayatana)
    known_good_packages+=(javascript-common)
    known_good_packages+=(kerneloops-daemon)
    known_good_packages+=(kerneloops)
    known_good_packages+=(krb5-locales)
    known_good_packages+=(laptop-detect)
    known_good_packages+=(less)
    known_good_packages+=(lightdm)
    known_good_packages+=(libalgorithm-diff-xs-perl)
    known_good_packages+=(libalgorithm-merge-perl)
    known_good_packages+=(libasprintf-dev)
    known_good_packages+=(libatm1)
    known_good_packages+=(libauthen-sasl-perl)
    known_good_packages+=(libc6-dbg)
    known_good_packages+=(libcanberra-gtk3-module)
    known_good_packages+=(libcanberra-gtk-module)
    known_good_packages+=(libcanberra-pulse)
    known_good_packages+=(libcgi-fast-perl)
    known_good_packages+=(libclutter-1.0-common)
    known_good_packages+=(libcogl-common)
    known_good_packages+=(libdbusmenu-gtk4)
    known_good_packages+=(libfile-fcntllock-perl)
    known_good_packages+=(libfile-mimeinfo-perl)
    known_good_packages+=(libfreerdp-plugins-standard)
    known_good_packages+=(libfribidi0)
    known_good_packages+=(libgettextpo-dev)
    known_good_packages+=(libgphoto2-l10n)
    known_good_packages+=(libgpod-common)
    known_good_packages+=(libgtk2.0-bin)
    known_good_packages+=(libhtml-format-perl)
    known_good_packages+=(libhtml-form-perl)
    known_good_packages+=(libhttp-daemon-perl)
    known_good_packages+=(libjs-jquery)
    known_good_packages+=(libllvm3.8)
    known_good_packages+=(liblouisutdml-bin)
    known_good_packages+=(libmagickcore-6.q16-2-extra)
    known_good_packages+=(libmircommon5)
    known_good_packages+=(libmtp-runtime)
    known_good_packages+=(libnet-dbus-perl)
    known_good_packages+=(libnet-libidn-perl)
    known_good_packages+=(libnss-mdns)
    known_good_packages+=(libp11-kit-gnome-keyring)
    known_good_packages+=(libpam-gnome-keyring)
    known_good_packages+=(libpango1.0-0)
    known_good_packages+=(libpaper-utils)
    known_good_packages+=(libperlio-gzip-perl)
    known_good_packages+=(libproxy1-plugin-gsettings)
    known_good_packages+=(libproxy1-plugin-networkmanager)
    known_good_packages+=(libqmi-glib1)
    known_good_packages+=(libqpdf17)
    known_good_packages+=(libqt4-sql-sqlite)
    known_good_packages+=(libreoffice-avmedia-backend-gstreamer)
    known_good_packages+=(libreoffice-calc)
    known_good_packages+=(libreoffice-gnome)
    known_good_packages+=(libreoffice-help-en-us)
    known_good_packages+=(libreoffice-math)
    known_good_packages+=(libreoffice-ogltrans)
    known_good_packages+=(libreoffice-pdfimport)
    known_good_packages+=(libreoffice-style-breeze)
    known_good_packages+=(libtie-ixhash-perl)
    known_good_packages+=(libtxc-dxtn-s2tc0)
    known_good_packages+=(libwacom-bin)
    known_good_packages+=(libwebkit2gtk-4.0-37-gtk2)
    known_good_packages+=(libwmf0.2-7-gtk)
    known_good_packages+=(libx11-protocol-perl)
    known_good_packages+=(libxml-xpathengine-perl)
    known_good_packages+=(lintian)
    known_good_packages+=(linux-generic-hwe-16.04)
    known_good_packages+=(linux-headers-4.15.0-45-generic)
    known_good_packages+=(linux-headers-4.15.0-112-generic)
    known_good_packages+=(linux-modules-extra-4.15.0-45-generic)
    known_good_packages+=(linux-modules-extra-4.15.0-112-generic)
    known_good_packages+=(login)
    known_good_packages+=(libaacs0)
    known_good_packages+=(libbdplus0)
    known_good_packages+=(libc6-dev)
    known_good_packages+=(libcaribou-gtk3-module)
    known_good_packages+=(libcaribou-gtk-module)
    known_good_packages+=(libclass-isa-perl)
    known_good_packages+=(libdbd-mysql-perl)
    known_good_packages+=(libehcache-java)
    known_good_packages+=(libgail-common)
    known_good_packages+=(libgsf-bin)
    known_good_packages+=(libgtk2-perl)
    known_good_packages+=(libgtk-3-bin)
    known_good_packages+=(libhtml-template-perl)
    known_good_packages+=(libimage-magick-perl)
    known_good_packages+=(libjxr-tools)
    known_good_packages+=(liblockfile-bin)
    known_good_packages+=(libmagickcore-6.q16-3-extra)
    known_good_packages+=(libmailtools-perl)
    known_good_packages+=(libnss-myhostname)
    known_good_packages+=(libpam-cap)
    known_good_packages+=(libperl4-corelibs-perl)
    known_good_packages+=(libpixie-java)
    known_good_packages+=(libreoffice-gtk3)
    known_good_packages+=(libreoffice-impress)
    known_good_packages+=(libreoffice-report-builder)
    known_good_packages+=(libreoffice-sdbc-hsqldb)
    known_good_packages+=(libreoffice-sdbc-postgresql)
    known_good_packages+=(libreoffice-style-galaxy)
    known_good_packages+=(libreoffice-style-tango)
    known_good_packages+=(libreoffice-writer)
    known_good_packages+=(libsac-java-gcj)
    known_good_packages+=(libsane-extras)
    known_good_packages+=(libsasl2-modules)
    known_good_packages+=(libswitch-perl)
    known_good_packages+=(libterm-readkey-perl)
    known_good_packages+=(libtxc-dxtn-s2tc)
    known_good_packages+=(libwmf-bin)
    known_good_packages+=(libblockdev-crypto2)
    known_good_packages+=(libdata-dump-perl)
    known_good_packages+=(libdazzle-1.0-0)
    known_good_packages+=(libedataserverui-1.2-2)
    known_good_packages+=(libgc1c2)
    known_good_packages+=(libgdk-pixbuf2.0-bin)
    known_good_packages+=(libgexiv2-2)
    known_good_packages+=(libnss-systemd)
    known_good_packages+=(libpoppler-qt5-1)
    known_good_packages+=(libqqwing2v5)
    known_good_packages+=(libqt5printsupport5)
    known_good_packages+=(libquazip5-1)
    known_good_packages+=(libraw16)
    known_good_packages+=(libreoffice)
    known_good_packages+=(libreoffice-nlpsolver)
    known_good_packages+=(libreoffice-wiki-publisher)
    known_good_packages+=(libsox-fmt-all)
    known_good_packages+=(lmodern)
    known_good_packages+=(linux-headers-4.9.0-14-amd64)
    known_good_packages+=(linux-image-4.9.0-13-amd64)
    known_good_packages+=(linux-image-amd64)
    known_good_pacakges+=(linux-generic)
    known_good_packages+=(logrotate)
    known_good_packages+=(manpages-dev)
    known_good_packages+=(memtest86+)
    known_good_packages+=(mlocate)
    known_good_packages+=(mobile-broadband-provider-info)
    known_good_packages+=(modemmanager)
    known_good_packages+=(mousetweaks)
    known_good_packages+=(mtr-tiny)
    known_good_packages+=(mythes-en-us)
    known_good_packages+=(minissdpd)
    known_good_packages+=(mscompress)
    known_good_packages+=(nano)
    known_good_packages+=(nautilus-extension-gnome-terminal)
    known_good_packages+=(nautilus-sendto)
    known_good_packages+=(nautilus-share)
    known_good_packages+=(ncurses-base)
    known_good_packages+=(ncurses-bin)
    known_good_packages+=(ncurses-term)
    known_good_packages+=(netpbm)
    known_good_packages+=(network-manager-gnome)
    known_good_packages+=(network-manager-config-connectivity-ubuntu)
    known_good_packages+=(network-manager-pptp-gnome)
    known_good_packages+=(notify-osd-icons)
    known_good_packages+=(notification-daemon)
    known_good_packages+=(ntfs-3g)
    known_good_packages+=(onboard-data)
    known_good_packages+=(openoffice.org-hyphenation)
    known_good_packages+=(open-vm-tools-desktop)
    known_good_packages+=(os-prober)
    known_good_packages+=(overlay-scrollbar-gtk2)
    known_good_packages+=(packagekit-tools)
    known_good_packages+=(pavucontrol)
    known_good_packages+=(pcmciautils)
    known_good_packages+=(plymouth-theme-ubuntu-logo)
    known_good_packages+=(plymouth-theme-ubuntu-text)
    known_good_packages+=(pm-utils)
    known_good_packages+=(powermgmt-base)
    known_good_packages+=(policykit-desktop-privileges)
    known_good_packages+=(ppp)
    known_good_packages+=(pppconfig)
    known_good_packages+=(pppoeconf)
    known_good_packages+=(printer-driver-all)
    known_good_packages+=(printer-driver-c2050)
    known_good_packages+=(printer-driver-cjet)
    known_good_packages+=(printer-driver-dymo)
    known_good_packages+=(printer-driver-escpr)
    known_good_packages+=(printer-driver-fujixerox)
    known_good_packages+=(printer-driver-hpijs)
    known_good_packages+=(printer-driver-m2300w)
    known_good_packages+=(printer-driver-pnm2ppa)
    known_good_packages+=(printer-driver-brlaser)
    known_good_packages+=(printer-driver-c2esp)
    known_good_packages+=(printer-driver-foo2zjs)
    known_good_packages+=(printer-driver-gutenprint)
    known_good_packages+=(printer-driver-min12xxw)
    known_good_packages+=(printer-driver-postscript-hp)
    known_good_packages+=(printer-driver-ptouch)
    known_good_packages+=(printer-driver-pxljr)
    known_good_packages+=(printer-driver-sag-gdi)
    known_good_packages+=(printer-driver-splix)
    known_good_packages+=(pulseaudio-module-bluetooth)
    known_good_packages+=(pulseaudio-module-x11)
    known_good_packages+=(python3-aptdaemon.pkcompat)
    known_good_packages+=(python3-bs4)
    known_good_packages+=(python3-cffi-backend)
    known_good_packages+=(python3-html5lib)
    known_good_packages+=(python3-renderpm)
    known_good_packages+=(python3-systemd)
    known_good_packages+=(python3-uno)
    known_good_packages+=(python-notify)
    known_good_packages+=(qpdf)
    known_good_packages+=(qt-at-spi)
    known_good_packages+=(qttranslations5-l10n)
    known_good_packages+=(rarian-compat)
    known_good_packages+=(realmd)
    known_good_packages+=(reportbug)
    known_good_packages+=(rsyslog)
    known_good_packages+=(rygel-playbin)
    known_good_packages+=(rygel-tracker)
    known_good_packages+=(rename)
    known_good_packages+=(rhythmbox-plugins)
    known_good_packages+=(rhythmbox-plugin-zeitgeist)
    known_good_packages+=(rtkit)
    known_good_packages+=(rhythmbox-plugin-alternative-toolbar)
    known_good_packages+=(sane-utils)
    known_good_packages+=(seahorse)
    known_good_packages+=(secureboot-db)
    known_good_packages+=(sessioninstaller)
    known_good_packages+=(session-shortcuts)
    known_good_packages+=(shotwell)
    known_good_packages+=(signon-plugin-password)
    known_good_packages+=(signon-ui)
    known_good_packages+=(simple-scan)
    known_good_packages+=(snapd-login-service)
    known_good_packages+=(sni-qt)
    known_good_packages+=(ssh-import-id)
    known_good_packages+=(system-config-printer-gnome)
    known_good_packages+=(system-config-printer-udev)
    known_good_packages+=(sound-theme-freedesktop)
    known_good_packages+=(speech-dispatcher-espeak-ng)
    known_good_packages+=(sudo)
    known_good_packages+=(synaptic)
    known_good_packages+=(system-config-printer-common)
    known_good_packages+=(sysvinit-utils)
    known_good_packages+=(sound-icons)
    known_good_packages+=(sox)
    known_good_packages+=(thermald)
    known_good_packages+=(thunderbird-gnome-support)
    known_good_packages+=(thunderbird-locale-en-us)
    known_good_packages+=(tk)
    known_good_packages+=(toshset)
    known_good_packages+=(ttf-ancient-fonts-symbola)
    known_good_packages+=(task-desktop)
    known_good_packages+=(task-english)
    known_good_packages+=(task-print-server)
    known_good_packages+=(tcpd)
    known_good_packages+=(tmux)
    known_good_packages+=(traceroute)
    known_good_packages+=(tracker-gui)
    known_good_packages+=(tracker-miner-fs)
    known_good_packages+=(transfig)
    known_good_packages+=(ubuntu-core-launcher)
    known_good_packages+=(ubuntu-desktop)
    known_good_packages+=(ubuntu-docs)
    known_good_packages+=(ubuntu-minimal)
    known_good_packages+=(ubuntu-software)
    known_good_packages+=(ubuntu-standard)
    known_good_packages+=(ubuntu-system-service)
    known_good_packages+=(ubuntu-touch-sounds)
    known_good_packages+=(ubuntu-report)
    known_good_packages+=(ufw)
    known_good_packages+=(unattended-upgrades)
    known_good_packages+=(unity-accessibility-profiles)
    known_good_packages+=(unity-control-center-faces)
    known_good_packages+=(unity-control-center-signon)
    known_good_packages+=(unity-greeter)
    known_good_packages+=(unity-gtk2-module)
    known_good_packages+=(unity-gtk3-module)
    known_good_packages+=(unity-lens-applications)
    known_good_packages+=(unity-lens-files)
    known_good_packages+=(unity-lens-photos)
    known_good_packages+=(unity-lens-video)
    known_good_packages+=(unity-scope-calculator)
    known_good_packages+=(unity-scope-chromiumbookmarks)
    known_good_packages+=(unity-scope-colourlovers)
    known_good_packages+=(unity-scope-devhelp)
    known_good_packages+=(unity-scope-firefoxbookmarks)
    known_good_packages+=(unity-scope-gdrive)
    known_good_packages+=(unity-scope-manpages)
    known_good_packages+=(unity-scope-openclipart)
    known_good_packages+=(unity-scope-texdoc)
    known_good_packages+=(unity-scope-tomboy)
    known_good_packages+=(unity-scope-video-remote)
    known_good_packages+=(unity-scope-virtualbox)
    known_good_packages+=(unity-scope-yelp)
    known_good_packages+=(unity-scope-zotero)
    known_good_packages+=(unity-webapps-common)
    known_good_packages+=(usb-creator-gtk)
    known_good_packages+=(usb-creator-common)
    known_good_packages+=(usb-modeswitch)
    known_good_packages+=(usbmuxd)
    known_good_packages+=(uuid-runtime)
    known_good_packages+=(unoconv)
    known_good_packages+=(unzip)
    known_good_packages+=(util-linux-locales)
    known_good_packages+=(vbetool)
    known_good_packages+=(vim)
    known_good_packages+=(va-driver-all)
    known_good_packages+=(vdpau-driver-all)
    known_good_packages+=(vim-tiny)
    known_good_packages+=(vim-gtk)
    known_good_packages+=(wamerican)
    known_good_packages+=(wbritish)
    known_good_packages+=(whoopsie)
    known_good_packages+=(xbrlapi)
    known_good_packages+=(xcursor-themes)
    known_good_packages+=(xdg-desktop-portal-gtk)
    known_good_packages+=(xfonts-scalable)
    known_good_packages+=(xml-core)
    known_good_packages+=(xserver-xorg-hwe-16.04)
    known_good_packages+=(xserver-xorg-legacy-hwe-16.04)
    known_good_packages+=(xserver-xorg-video-all-hwe-16.04)
    known_good_packages+=(xserver-xorg-video-intel-hwe-16.04)
    known_good_packages+=(xserver-xorg-video-qxl-hwe-16.04)
    known_good_packages+=(xserver-xorg-video-all)
    known_good_packages+=(xul-ext-ubufox)
    known_good_packages+=(xbitmaps)
    known_good_packages+=(xdg-user-dirs-gtk)
    known_good_packages+=(xorgxrdp)
    known_good_packages+=(xserver-xephyr)
    known_good_packages+=(xserver-xorg-input-wacom)
    known_good_packages+=(xserver-xorg-legacy)
    known_good_packages+=(xserver-xorg-video-intel)
    known_good_packages+=(xserver-xorg-video-qxl)
    known_good_packages+=(zerofree)
    known_good_packages+=(zeitgeist-datahub)

    for package in ${known_good_packages[@]}
    do
        sed -i "/^${package}$/d" $1
    done
}

automatic_packages()
{
    apt list --installed |grep automatic | cut -d / -f1 | sort > output/automatic_packages.txt
}

add_description()
{
    package_list=( $(cat $1) )
    for package in ${package_list[@]}
    do
        description=$(dpkg -s $package | grep Description | cut -d : -f 2-)
        sed -i "/^$package$/d" $1
        echo $package : $description |tee -a $1
    done
}

add_known_bad_packages()
{
    if dpkg -s netcat-openbsd ; then
        echo netcat-openbsd | tee -a $1
    fi
}
    

init
installed_packages
top_packages
remove_known_good_packages output/top_packages.txt
add_known_bad_packages output/top_packages.txt
add_description output/top_packages.txt

